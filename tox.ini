[tox]
envlist = pylint,py{27,37},flake8,pytest  # ,pre-commit

[testenv]
setenv =
    PYTHONPATH = {toxinidir}
    PYTHONWARNINGS = ignore:DEPRECATION::pip._internal.cli.base_command

[testenv:pre-commit]
description = format the code
passenv =
    PYTHONPATH
    SSH_AUTH_SOCK
    http_proxy
    https_proxy
    no_proxy
deps =
    pylint >= 2.4, < 3
    pre-commit >= 2, < 3
extras =
    docs
commands =
    pre-commit run --all-files --show-diff-on-failure

[flake8]
max-line-length = 120
exclude = .tox,docs

[testenv:flake8]
max-line-length = 120
basepython = python
deps = flake8
commands = flake8 global_logger tests --exclude=tryouts*.py

[testenv:pytest]
deps = pytest
addopts = -ra -q
testpaths =
    {toxinidir}/tests
commands = pytest tests

# pylint
[testenv:pylint]
deps = pylint
       -r requirements.txt
       -r requirements-tests.txt

commands = pylint --rcfile=tox.ini {toxinidir}\global_logger {toxinidir}\docs\source\examples.py

[MASTER]
ignore-patterns = tryouts*.py

[MESSAGES CONTROL]
disable = logging-not-lazy,
          fixme,
          missing-function-docstring,
          missing-class-docstring,
          too-few-public-methods,

